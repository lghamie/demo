<div class="row" id="main-row">
    <div class="row hidden-mobile">
        <!-- PAGE HEADER -->
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <h1 class="page-title txt-color-blueDark">
            <i class="fa-fw fa fa-video-camera"></i> 
                Conferencias
        </h1>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 text-align-right">
            <div class="page-title">
                <a href="javascript:void(0);" class="btn btn-default">Upload</a>
                <a href="javascript:void(0);" class="btn btn-default">Load Library</a>
            </div>
        </div>
        <!-- END OF HEADER -->
    </div>
    <div class="row" id="mainDiv">
        <!-- VIDEO PRINCIPAL -->
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" id="mainVideoColumn">
            <div id="containingBlockLocal">
                <div class="videoWrapper">
                    <object>
                        <video id="localVideo" controls></video>
                    </object>
                </div>
            </div>
            <!-- VIDEO REMOTO -->
            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" id="remoteVideoColumn">
                <div id="containingBlockRemote">
                    <div class="videoWrapper">
                        <object>
                            <param name="allowscriptaccess" value="always"></param>
                            <div id="remotes"></div>
                        </object>
                    </div>
                </div>
            </div>
            <!-- FIN VIDEO REMOTO -->
        </div>
        <!-- FIN VIDEO PRINCIPAL -->
        <!-- CHAT -->
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" id="chatColumn">
            <div class="main-position">
                <div class="chat-main">
                    <li class="chat-users top-menu-invisible">
                        <a><i class="fa fa-lg fa-fw fa-comment-o"><em class="bg-color-black flash animated">!</em></i> <span class="menu-item-parent" style="cursor:pointer">Smart Chat</span></a>
                        <ul>
                            <li>
                                <!-- DISPLAY USERS -->
                                <div class="display-users">
                                    <input class="form-control chat-user-filter" placeholder="Filter" type="text">
                                    <a href="#" class="usr" data-chat-id="cha1" data-chat-fname="Sadi" data-chat-lname="Orlaf" data-chat-status="busy" data-chat-alertmsg="Sadi Orlaf is in a meeting. Please do not disturb!" data-chat-alertshow="true" data-rel="popover-hover" data-placement="left" data-html="true" data-content="
                                            <div class='usr-card'>
                                                <img src='img/avatars/5.png' alt='Sadi Orlaf'>
                                                <div class='usr-card-content'>
                                                    <h3>Sadi Orlaf</h3>
                                                    <p>Marketing Executive</p>
                                                </div>
                                            </div>
                                        ">
                                        <i></i>Sadi Orlaf
                                    </a>
                                    <br>
                                    <br>
                                    <a href="#" class="usr" data-chat-id="cha2" data-chat-fname="Jessica" data-chat-lname="Dolof" data-chat-status="online" data-chat-alertmsg="" data-chat-alertshow="false" data-rel="popover-hover" data-placement="left" data-html="true" data-content="
                                            <div class='usr-card'>
                                                <img src='img/avatars/1.png' alt='Jessica Dolof'>
                                                <div class='usr-card-content'>
                                                    <h3>Jessica Dolof</h3>
                                                    <p>Sales Administrator</p>
                                                </div>
                                            </div>
                                        ">
                                        <i></i>Jessica Dolof
                                    </a>
                                    <br>
                                    <br>
                                    <a href="#" class="usr" data-chat-id="cha3" data-chat-fname="Zekarburg" data-chat-lname="Almandalie" data-chat-status="online" data-rel="popover-hover" data-placement="left" data-html="true" data-content="
                                            <div class='usr-card'>
                                                <img src='img/avatars/3.png' alt='Zekarburg Almandalie'>
                                                <div class='usr-card-content'>
                                                    <h3>Zekarburg Almandalie</h3>
                                                    <p>Sales Admin</p>
                                                </div>
                                            </div>
                                        ">
                                        <i></i>Zekarburg Almandalie
                                    </a>
                                    <br>
                                    <br>
                                    <a href="#" class="usr" data-chat-id="cha4" data-chat-fname="Barley" data-chat-lname="Krazurkth" data-chat-status="away" data-rel="popover-hover" data-placement="left" data-html="true" data-content="
                                            <div class='usr-card'>
                                                <img src='img/avatars/4.png' alt='Barley Krazurkth'>
                                                <div class='usr-card-content'>
                                                    <h3>Barley Krazurkth</h3>
                                                    <p>Sales Director</p>
                                                </div>
                                            </div>
                                        ">
                                        <i></i>Barley Krazurkth
                                    </a>
                                    <br>
                                    <br>
                                    <a href="#" class="usr offline" data-chat-id="cha5" data-chat-fname="Farhana" data-chat-lname="Amrin" data-chat-status="incognito" data-rel="popover-hover" data-placement="left" data-html="true" data-content="
                                            <div class='usr-card'>
                                                <img src='img/avatars/female.png' alt='Farhana Amrin'>
                                                <div class='usr-card-content'>
                                                    <h3>Farhana Amrin</h3>
                                                    <p>Support Admin <small><i class='fa fa-music'></i> Playing Beethoven Classics</small></p>
                                                </div>
                                            </div>
                                        ">
                                        <i></i>Farhana Amrin (offline)
                                    </a>
                                    <br>
                                    <br>
                                    <a href="#" class="usr offline" data-chat-id="cha6" data-chat-fname="Lezley" data-chat-lname="Jacob" data-chat-status="incognito" data-rel="popover-hover" data-placement="left" data-html="true" data-content="
                                            <div class='usr-card'>
                                                <img src='img/avatars/male.png' alt='Lezley Jacob'>
                                                <div class='usr-card-content'>
                                                    <h3>Lezley Jacob</h3>
                                                    <p>Sales Director</p>
                                                </div>
                                            </div>
                                        ">
                                        <i></i>Lezley Jacob (offline)
                                    </a>
                                </div>
                                <!-- END DISPLAY USERS -->
                            </li>
                        </ul>
                    </li>
                </div>
            </div>
        </div>
        <!-- FIN CHAT -->
    </div>
</div>
<!--ESTILO DEL CHAT-->
<style>
.main-position {
    position: absolute;
    right: 0;
}

.chat-main {
    position: relative;
    border-style: solid;
    border-width: 1px;
    width: 250px;
    height: 100%;
    background-color: #2C2C2C;
}
</style>
<!--ESTILO DE LOS VIDEOS-->
<style>

#mainVideoColumn {
    height: 70vh;
    width: 70%;
    left: 2vh;
}

#remoteVideoColumn {
    height: 18vh;
    width: 20%;
    position: absolute;
    right: 0;
    bottom: 0;
    border-style: solid;
    border-color: red;
    display: none;
}

#chatColumn {
    position: absolute;
    height: 20vh;
    width: 15%;
    right: 0;
}

.videoWrapper object,
.videoWrapper div {
    position: absolute;
    width: 100%;
    height: 100%;
    right: 0;
}

.videoWrapper object,
.videoWrapper video {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: black;
}
</style>
<!-- ESTILO DEL REPRODUCTOR DE VIDEO-->
<style>

input#volumeslider {
    width: 30%;
    background-color: red;
    color: red;
}
</style>
<!-- SCRIPT PARA ESCONDER CHAT-->
<script>
$(document).ready(function() {
    $(".menu-item-parent").click(function() {
        $(".display-users").toggle();
    });
});
</script>
<!-- SmartChat UI : plugin -->
<script src="js/smart-chat-ui/smart.chat.ui.min.js"></script>
<script src="js/smart-chat-ui/smart.chat.manager.min.js"></script>
<script src="/js/rtc/simplewebrtc.bundle.js"></script>
<script>
//Pasando el parámetro localVideoEl levanta automáticamente tu video en contenedor que se llame con el nombre asignado al parámetro

var webrtc = new SimpleWebRTC({
    // the id/element dom element that will hold "our" video
    localVideoEl: 'localVideo',
    // the id/element dom element that will hold remote videos
    remoteVideosEl: '',
    // immediately ask for camera access
    autoRequestMedia: true,

    mirror: false
});

// we have to wait until it's ready
webrtc.on('readyToCall', function() {
    // you can name it anything
    webrtc.joinRoom('your awesome room name');
});

//Cuando se conecta un peer
webrtc.on('videoAdded', function(video, peer) {

    $(document).ready(function() {
        $("#remoteVideoColumn").show();
    });


    console.log('video added', peer);
    var remotes = document.getElementById('remotes');
    if (remotes) {

        var container = document.createElement('div');
        container.className = 'peerVideoContainer';
        container.id = 'container_' + webrtc.getDomId(peer);
        container.appendChild(video);

        // suppress contextmenu
        video.oncontextmenu = function() {
            return false;
        };

        remotes.appendChild(container);
    }
});

//Cuando se desconecta un peer
webrtc.on('videoRemoved', function(video, peer) {

    $(document).ready(function() {
        $("#remoteVideoColumn").hide();
    });


    console.log('video removed ', peer);
    var remotes = document.getElementById('remotes');
    var el = document.getElementById(peer ? 'container_' + webrtc.getDomId(peer) : 'localScreenContainer');
    if (remotes && el) {
        remotes.removeChild(el);
    }
});
</script>
<!--SCRIPT DE FUNCIONES DEL REPRODUCTOR DE VIDEO-->
<script>
var vid = document.getElementById("localVideo");

// var fullscreenbtn = document.getElementById("fullscreenbtn");
// var playbtn = document.getElementById("playpausebtn");
// var mutebtn = document.getElementById("mutebtn");
// var volumeslider = document.getElementById("volumeslider");

// playbtn.addEventListener("click", playPause, false);
// mutebtn.addEventListener("click", vidmute, false);
// volumeslider.addEventListener("change", setvolume, false);
vid.addEventListener("dblclick", toggleFullScreen, false);

function toggleFullScreen() {
    if (vid.requestFullScreen) {
        vid.requestFullScreen();
    } else if (vid.webkitRequestFullScreen) {
        vid.webkitRequestFullScreen();
    } else if (vid.mozRequestFullScreen) {
        vid.mozRequestFullScreen();
    }
}

function playPause() {
    if (vid.paused) {
        vid.play();
        playbtn.innerHTML = "Pause";
    } else {
        vid.pause();
        playbtn.innerHTML = "Play";
    }
}

function vidmute() {
    if (vid.muted) {
        vid.muted = false;
        mutebtn.innerHTML = "Mute";
    } else {
        vid.muted = true;
        mutebtn.innerHTML = "Unmute";
    }
}

function setvolume() {
    vid.volume = volumeslider.value / 100;
}

$('.slider').slider();
</script>
<!-- end row -->
<script type="text/javascript">
/* DO NOT REMOVE : GLOBAL FUNCTIONS!
 *
 * pageSetUp(); WILL CALL THE FOLLOWING FUNCTIONS
 *
 * // activate tooltips
 * $("[rel=tooltip]").tooltip();
 *
 * // activate popovers
 * $("[rel=popover]").popover();
 *
 * // activate popovers with hover states
 * $("[rel=popover-hover]").popover({ trigger: "hover" });
 *
 * // activate inline charts
 * runAllCharts();
 *
 * // setup widgets
 * setup_widgets_desktop();
 *
 * // run form elements
 * runAllForms();
 *
 ********************************
 *
 * pageSetUp() is needed whenever you load a page.
 * It initializes and checks for all basic elements of the page
 * and makes rendering easier.
 *
 */

pageSetUp();

/*
 * ALL PAGE RELATED SCRIPTS CAN GO BELOW HERE
 * eg alert("my home function");
 * 
 * var pagefunction = function() {
 *   ...
 * }
 * loadScript("js/plugin/_PLUGIN_NAME_.js", pagefunction);
 * 
 * TO LOAD A SCRIPT:
 * var pagefunction = function (){ 
 *  loadScript(".../plugin.js", run_after_loaded);  
 * }
 * 
 * OR
 * 
 * loadScript(".../plugin.js", run_after_loaded);
 */

// PAGE RELATED SCRIPTS

// pagefunction

var pagefunction = function() {

    $('.superbox').SuperBox();

};

// end pagefunction

// run pagefunction on load

// load bootstrap-progress bar script
loadScript("js/plugin/superbox/superbox.min.js", pagefunction);
</script>
