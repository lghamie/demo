<div class="row" id="main-row">
    <div class="row hidden-mobile">
        <!-- PAGE HEADER -->
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <h1 class="page-title txt-color-blueDark">
            <i class="fa-fw fa fa-video-camera"></i> 
                Conferencias
        </h1>
        </div>
        <div class="container">
            <div class="row">
                <div class="hidden-md col-md-6" id="chatColumn">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <span class="glyphicon glyphicon-comment"></span> Chat
                            <div class="btn-group pull-right">
                                <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                    <span class="glyphicon glyphicon-chevron-down"></span>
                                </button>
                                <ul class="dropdown-menu slidedown">
                                    <li><a href="http://www.jquery2dotnet.com"><span class="glyphicon glyphicon-refresh">
                            </span>Refresh</a></li>
                                    <li><a href="http://www.jquery2dotnet.com"><span class="glyphicon glyphicon-ok-sign">
                            </span>Available</a></li>
                                    <li><a href="http://www.jquery2dotnet.com"><span class="glyphicon glyphicon-remove">
                            </span>Busy</a></li>
                                    <li><a href="http://www.jquery2dotnet.com"><span class="glyphicon glyphicon-time"></span>
                                Away</a></li>
                                    <li class="divider"></li>
                                    <li><a href="http://www.jquery2dotnet.com"><span class="glyphicon glyphicon-off"></span>
                                Sign Out</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="panel-body">
                            <ul class="chat">
                                <li class="left clearfix"><span class="chat-img pull-left">
                           
                        </span>
                                    <div class="chat-body clearfix">
                                        <div class="header">
                                            <strong class="primary-font">Lucas Jaime</strong> <small class="pull-right text-muted">
                                        <span class="glyphicon glyphicon-time"></span>12 mins ago</small>
                                        </div>
                                        <p>
                                            Ehhh Cabeee, el Locu no quiere venir el s치bado
                                        </p>
                                    </div>
                                </li>
                                <li class="right clearfix"><span class="chat-img pull-right">

                           
                        </span>
                                    <div class="chat-body clearfix">
                                        <div class="header">
                                            <small class=" text-muted"><span class="glyphicon glyphicon-time"></span>13 mins ago</small>
                                            <strong class="pull-right primary-font">El cabe</strong>
                                        </div>
                                        <p>
                                            Por???
                                        </p>
                                    </div>
                                </li>
                                <li class="left clearfix"><span class="chat-img pull-left">
                            
                        </span>
                                    <div class="chat-body clearfix">
                                        <div class="header">
                                            <strong class="primary-font">Lucas Jaime</strong> <small class="pull-right text-muted">
                                        <span class="glyphicon glyphicon-time"></span>14 mins ago</small>
                                        </div>
                                        <p>
                                            Porque es locu... llora por todo
                                        </p>
                                    </div>
                                </li>
                                <li class="right clearfix"><span class="chat-img pull-right">
                            
                        </span>
                                    <div class="chat-body clearfix">
                                        <div class="header">
                                            <small class=" text-muted"><span class="glyphicon glyphicon-time"></span>15 mins ago</small>
                                            <strong class="pull-right primary-font">El cabe</strong>
                                        </div>
                                        <p>
                                            IIIIIIIIHHHHHHHHHHHHHHHHHHHHHHHHHH
                                        </p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="panel-footer">
                            <div class="input-group">
                                <input id="btn-input" type="text" class="form-control input-sm" placeholder="Type your message here..." />
                                <span class="input-group-btn">
                            <button class="btn btn-info btn-sm" id="btn-chat">
                                Send</button>
                        </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- FIN CHAT -->
        <!-- END OF HEADER -->
    </div>
    <div class="row" id="mainDiv">
        <!-- VIDEO PRINCIPAL -->
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" id="mainVideoColumn">
            <div id="containingBlockLocal">
                <div class="videoWrapper">
                    <object>
                        <div id="remotes"></div>
                    </object>
                </div>
            </div>
            <!-- VIDEO REMOTO -->
            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" id="remoteVideoColumn">
                <div id="containingBlockRemote">
                    <div class="videoWrapper">
                        <object>
                            <param name="allowscriptaccess" value="always"></param>
                            <video id="localVideo" controls></video>
                        </object>
                    </div>
                </div>
            </div>
            <!-- FIN VIDEO REMOTO -->
        </div>
        <!-- FIN VIDEO PRINCIPAL -->
    </div>
</div>
<!--ESTILO DEL CHAT-->
<style>
#chatColumn {
    position: absolute;
    right: 0;
    height: 100%;
}

.chat {
    list-style: none;
    margin: 0;
    padding: 0;
}

.chat li {
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 1px dotted #B3A9A9;
}

.chat li.left .chat-body {
    margin-left: 15px;
}

.chat li.right .chat-body {
    margin-right: 15px;
}

.chat li .chat-body p {
    margin: 0;
    color: #777777;
}

.panel {
    position: absolute;
    right: 0;
    top: 0;
    width: 255px;
}

.panel .slidedown .glyphicon,
.chat .glyphicon {
    margin-right: 5px;
}

.panel-body {
    overflow-y: scroll;
    height: 73vh;
    padding: 0;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
    background-color: #F5F5F5;
}

::-webkit-scrollbar {
    width: 12px;
    background-color: #F5F5F5;
}

::-webkit-scrollbar-thumb {
    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);
    background-color: #555;
}

.panel-primary>.panel-heading {
    color: #fff;
    background-color: #474544;
    border-color: #474544;
}

.chat-body {
    overflow-y: hidden;
    height: auto;
}
</style>
<!--ESTILO DE LOS VIDEOS-->
<style>
#mainVideoColumn {
    height: 70vh;
    width: 70%;
    left: 2vh;
}

#remoteVideoColumn {
    height: 18vh;
    width: 20%;
    position: absolute;
    right: 0;
    bottom: 0;
    border-style: solid;
    border-color: red;
    display: none;
}

.videoWrapper {
    position: relative;
    padding-bottom: 56.25%;
    /* 16:9 */
    padding-top: 25px;
}

.videoWrapper object,
.videoWrapper div {
    position: absolute;
    width: 100%;
    height: 100%;
    right: 0;
}

.videoWrapper object,
.videoWrapper video {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: black;
}
</style>
<!-- ESTILO DEL REPRODUCTOR DE VIDEO-->
<style>
input#volumeslider {
    width: 30%;
    background-color: red;
    color: red;
}
</style>
<!-- SCRIPT PARA ESCONDER CHAT-->
<script>
$(document).ready(function() {
    $(".menu-item-parent").click(function() {
        $(".display-users").toggle();
    });
});
</script>
<script src="/js/rtc/simplewebrtc.bundle.js"></script>
<script>
//Pasando el par치metro localVideoEl levanta autom치ticamente tu video en contenedor que se llame con el nombre asignado al par치metro

var webrtc = new SimpleWebRTC({
    // the id/element dom element that will hold "our" video
    localVideoEl: 'localVideo',
    // the id/element dom element that will hold remote videos
    remoteVideosEl: '',
    // immediately ask for camera access
    autoRequestMedia: true,
    audio: false,
    video: false,
    mirror: false
});



// we have to wait until it's ready
webrtc.on('readyToCall', function() {
    // you can name it anything
    webrtc.joinRoom(window.room);
});

//Cuando se conecta un peer
webrtc.on('videoAdded', function(video, peer) {

    webrtc.mute();

    console.log('video added', peer);
    var remotes = document.getElementById('remotes');
    if (remotes) {

        var container = document.createElement('div');
        container.className = 'peerVideoContainer';
        container.id = 'container_' + webrtc.getDomId(peer);
        container.appendChild(video);

        // suppress contextmenu
        video.oncontextmenu = function() {
            return false;
        };

        remotes.appendChild(container);
    }


    $('#remotes div').slice(1).remove();

});

//Cuando se desconecta un peer
webrtc.on('videoRemoved', function(video, peer) {

    $(document).ready(function() {
        $("#remoteVideoColumn").hide();
    });


    console.log('video removed ', peer);
    var remotes = document.getElementById('remotes');
    var el = document.getElementById(peer ? 'container_' + webrtc.getDomId(peer) : 'localScreenContainer');
    if (remotes && el) {
        remotes.removeChild(el);
    }
});
</script>
<!--SCRIPT DE FUNCIONES DEL REPRODUCTOR DE VIDEO-->
<script>
var vid = document.getElementById("localVideo");


// var fullscreenbtn = document.getElementById("fullscreenbtn");
// var playbtn = document.getElementById("playpausebtn");
// var mutebtn = document.getElementById("mutebtn");
// var volumeslider = document.getElementById("volumeslider");

// playbtn.addEventListener("click", playPause, false);
// mutebtn.addEventListener("click", vidmute, false);
// volumeslider.addEventListener("change", setvolume, false);
vid.addEventListener("dblclick", toggleFullScreen, false);

function toggleFullScreen() {
    if (vid.requestFullScreen) {
        vid.requestFullScreen();
    } else if (vid.webkitRequestFullScreen) {
        vid.webkitRequestFullScreen();
    } else if (vid.mozRequestFullScreen) {
        vid.mozRequestFullScreen();
    }
}

function playPause() {
    if (vid.paused) {
        vid.play();
        playbtn.innerHTML = "Pause";
    } else {
        vid.pause();
        playbtn.innerHTML = "Play";
    }
}

function vidmute() {
    if (vid.muted) {
        vid.muted = false;
        mutebtn.innerHTML = "Mute";
    } else {
        vid.muted = true;
        mutebtn.innerHTML = "Unmute";
    }
}

function setvolume() {
    vid.volume = volumeslider.value / 100;
}

$('.slider').slider();
</script>
<!-- end row -->
<script type="text/javascript">
/* DO NOT REMOVE : GLOBAL FUNCTIONS!
 *
 * pageSetUp(); WILL CALL THE FOLLOWING FUNCTIONS
 *
 * // activate tooltips
 * $("[rel=tooltip]").tooltip();
 *
 * // activate popovers
 * $("[rel=popover]").popover();
 *
 * // activate popovers with hover states
 * $("[rel=popover-hover]").popover({ trigger: "hover" });
 *
 * // activate inline charts
 * runAllCharts();
 *
 * // setup widgets
 * setup_widgets_desktop();
 *
 * // run form elements
 * runAllForms();
 *
 ********************************
 *
 * pageSetUp() is needed whenever you load a page.
 * It initializes and checks for all basic elements of the page
 * and makes rendering easier.
 *
 */

pageSetUp();

/*
 * ALL PAGE RELATED SCRIPTS CAN GO BELOW HERE
 * eg alert("my home function");
 * 
 * var pagefunction = function() {
 *   ...
 * }
 * loadScript("js/plugin/_PLUGIN_NAME_.js", pagefunction);
 * 
 * TO LOAD A SCRIPT:
 * var pagefunction = function (){ 
 *  loadScript(".../plugin.js", run_after_loaded);  
 * }
 * 
 * OR
 * 
 * loadScript(".../plugin.js", run_after_loaded);
 */

// PAGE RELATED SCRIPTS

// pagefunction

var pagefunction = function() {

    $('.superbox').SuperBox();

};

var pagedestroy = function() {
    webrtc.stopLocalVideo();
    webrtc.leaveRoom();

};

// end pagefunction

// run pagefunction on load

// load bootstrap-progress bar script
loadScript("js/plugin/superbox/superbox.min.js", pagefunction);
</script>
