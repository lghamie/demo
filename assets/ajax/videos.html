<div class="row hidden-mobile">
	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
		<h1 class="page-title txt-color-blueDark">
			<!-- PAGE HEADER -->
			<i class="fa-fw fa fa-video-camera"></i> 
				Videos
		</h1>
	</div>
</div>

<!--
<div class="row">
	<div class="col-sm-12" style="margin-bottom: 20px;">
		<div class="input-group input-group-lg hidden-mobile">
			<div class="input-group-btn">
				<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					Todo <span class="caret"></span>
				</button>
				<ul class="dropdown-menu">
					<li class="active">
						<a href="javascript:void(0)"><i class="fa fa-check"></i> Todo</a>
					</li>
					<li class="divider"></li>
					<li>
						<a href="javascript:void(0)">Capacitacion</a>
					</li>
					<li>
						<a href="javascript:void(0)">Etc</a>
					</li>
					<li>
						<a href="javascript:void(0)">Etc2</a>
					</li>
				</ul>
			</div>
			<input class="form-control input-lg" type="text" placeholder="Buscar de nuevo..." id="search-project">
			<div class="input-group-btn">
				<button type="submit" class="btn btn-default">
					&nbsp;&nbsp;&nbsp;<i class="fa fa-fw fa-search fa-lg"></i>&nbsp;&nbsp;&nbsp;
				</button>
			</div>
		</div>
	</div>
</div>
-->

<div id="videoresults" ></div>


<script type="text/javascript">
	/* DO NOT REMOVE : GLOBAL FUNCTIONS!
	 *
	 * pageSetUp(); WILL CALL THE FOLLOWING FUNCTIONS
	 *
	 * // activate tooltips
	 * $("[rel=tooltip]").tooltip();
	 *
	 * // activate popovers
	 * $("[rel=popover]").popover();
	 *
	 * // activate popovers with hover states
	 * $("[rel=popover-hover]").popover({ trigger: "hover" });
	 *
	 * // activate inline charts
	 * runAllCharts();
	 *
	 * // setup widgets
	 * setup_widgets_desktop();
	 *
	 * // run form elements
	 * runAllForms();
	 *
	 ********************************
	 *
	 * pageSetUp() is needed whenever you load a page.
	 * It initializes and checks for all basic elements of the page
	 * and makes rendering easier.
	 *
	 */

	pageSetUp();
	
	/*
	 * ALL PAGE RELATED SCRIPTS CAN GO BELOW HERE
	 * eg alert("my home function");
	 * 
	 * var pagefunction = function() {
	 *   ...
	 * }
	 * loadScript("js/plugin/_PLUGIN_NAME_.js", pagefunction);
	 * 
	 * TO LOAD A SCRIPT:
	 * var pagefunction = function (){ 
	 *  loadScript(".../plugin.js", run_after_loaded);	
	 * }
	 * 
	 * OR
	 * 
	 * loadScript(".../plugin.js", run_after_loaded);
	 */

	// PAGE RELATED SCRIPTS

	// pagefunction
	
	var pagefunction = function() {
	/*	var SearchBar = React.createClass({
		  handleSubmit: function(e) {
		    e.preventDefault();
		    var searchterm = this.refs.searchterm.value.trim();
		    if (!searchterm) {
		      return;
		    }
		    
		    this.props.onSearchTermChange(searchterm);
		    //this.refs.searchterm.value = '';
		    return;
		  },
		  render: function() {
		    return (
			<form className="SearchBar row" onSubmit={this.handleSubmit}>
				<div className="col-sm-12" style={{marginBottom: '20px'}}>
					<div className="input-group input-group-lg hidden-mobile">
						<div className="input-group-btn">
							<button type="button" className="btn btn-default dropdown-toggle" data-toggle="dropdown">
								Todo <span className="caret"></span>
							</button>
							<ul className="dropdown-menu">
								<li className="active">
									<a href="javascript:void(0)"><i className="fa fa-check"></i> Todo</a>
								</li>
								<li className="divider"></li>
								<li>
									<a href="javascript:void(0)">Capacitacion</a>
								</li>
								<li>
									<a href="javascript:void(0)">Etc</a>
								</li>
								<li>
									<a href="javascript:void(0)">Etc2</a>
								</li>
							</ul>
						</div>
						<input className="form-control input-lg" type="text" ref="searchterm" placeholder="Buscar de nuevo..."/>
						<div className="input-group-btn">
							<button type="submit" className="btn btn-default" >
								&nbsp;&nbsp;&nbsp;<i className="fa fa-fw fa-search fa-lg"></i>&nbsp;&nbsp;&nbsp;
							</button>
						</div>
					</div>	
				</div>
			</form>
		    );
		  }
		});

		var SearchableVideoList = React.createClass({
		  getInitialState: function() {
		    return {data: []};
		  },
		  requestServer: function (titleSearch){

		  	var queryUrl = this.props.url + '?';
		  	if(titleSearch){
		  		queryUrl += 'where={"or" :[ ';
		  		var searchTermsArray = titleSearch.split(" ");
		  		for(var searchTerm in searchTermsArray){
		  			queryUrl += '{"title":{"contains":"'+ searchTermsArray[searchTerm] +'"}},';
		  		}
		  		queryUrl = 	queryUrl.slice(0, -1); 
		  		queryUrl += "]}";
		  	}
		  		
			$.ajax({
		      url: queryUrl,
		      dataType: 'json',
		      cache: true,
		      success: function(data) {
		        this.setState({data: data});
		      }.bind(this),
		      error: function(xhr, status, err) {
		        console.error(this.props.url, status, err.toString());
		      }.bind(this)
		    });
		  },
		  onSearchTermChange: function (searchterm){
		  	this.requestServer(searchterm);
		  },
		  componentDidMount: function() {
		  	this.requestServer();    
		  },
		  render: function() {	
		    return (
			  	<div className="searchBar">
			        <SearchBar onSearchTermChange={this.onSearchTermChange}/>
				    <VideoList data={this.state.data} />
				</div>
		    );
		  }
		});

		var VideoList = React.createClass({
		  getInitialState: function() {
		    return {data: []};
		  },
		  render: function() {	
		  	var videos = this.props.data.map(function (video) {
		      return (
		        <VideoBox  key={video.id} title={video.title} url={video.url}></VideoBox>
		      );
		    });
		    return (
		      <div className="videoList row">
		      	{videos}
		      </div>
		    );
		  }
		});

		var VideoBox = React.createClass({
		  render: function() {
		    return (
		      <div className="videoBox" >
		      	<div className="col-xs-12 col-sm-6 col-md-4 col-lg-3" style={{marginBottom: '20px'}}>
					<div className="video-container">
				    	<iframe src={this.props.url} frameBorder="0" width="560" height="349" ></iframe>
					</div>
				</div>
		      </div>
		    );
		  }
		});
		ReactDOM.render(
		  <SearchableVideoList url="/video" />,
		  document.getElementById('videoresults')
		);
*/
		console.log("Pagefunctoin");
	};
	
	// end pagefunction
	
	var pagedestroy = function(){
		console.log("peishdestroy");
	}
	// run pagefunction on load

	// load bootstrap-progress bar script
	//loadScript("js/react/components/video/videobox.js", pagefunction);
	pagefunction();
</script>


<script type="text/babel" src="js/react/components/video/videobox.js" />